<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Hall Of Fame - Głosowanie</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box;}
body{font-family:'Montserrat',sans-serif;background:radial-gradient(circle at top,#1b1f2b,#0b0e14);color:#e6e8ee;min-height:100vh;}
header{text-align:center;margin:30px 0 20px;}
header h1{font-size:36px;font-weight:700;color:#9aa2ff;}
header .subtitle{font-size:18px;color:#7fd1ff;margin-top:5px;}
.hero{display:flex;flex-direction:column;align-items:center;padding:20px;}
.card{background: rgba(21,25,35,0.95); padding:30px;border-radius:20px;box-shadow:0 10px 30px rgba(0,0,0,0.4);text-align:center;max-width:800px;width:100%;}
.card h2{color:#7fd1ff;font-size:24px;margin-bottom:5px;}
.card p.subtitle{color:#9aa2ff;margin-bottom:20px;}
.gallery{display:grid;grid-template-columns:repeat(3,1fr);gap:20px;margin-bottom:20px;}
.photo{background:#0d0f17;padding:10px;border-radius:15px;text-align:center;}
.photo img{width:100%;height:150px;object-fit:cover;border-radius:12px;margin-bottom:5px;}
.photo button{margin-top:5px;padding:5px 10px;background:#7fd1ff;color:#0b0e14;border:none;border-radius:8px;font-weight:600;cursor:pointer;transition:0.2s;}
.photo button.selected{background:#9aa2ff;color:#fff;}
#next-round-btn{padding:10px 20px;background:#7fd1ff;color:#0b0e14;border:none;border-radius:12px;font-weight:700;cursor:pointer;transition:0.2s;}
#next-round-btn:hover{background:#9aa2ff;color:#fff;}
.progress-container{width:100%;background:#0d0f17;border-radius:10px;height:15px;margin-bottom:20px;}
#progress-bar{height:100%;background:#7fd1ff;width:0%;border-radius:10px;transition:0.3s;}
#alert-modal{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.7);display:none;align-items:center;justify-content:center;}
.alert-content{background:#1b1f2b;padding:30px;border-radius:20px;text-align:center;}
.alert-content button{margin-top:15px;padding:8px 15px;background:#7fd1ff;color:#0b0e14;border:none;border-radius:10px;font-weight:600;cursor:pointer;}
</style>
</head>
<body>

<header>
<h1>Hall Of Fame: Jezioro</h1>
<p class="subtitle">Wybierz najlepszego w każdej kategorii</p>
</header>

<div class="hero">
<div class="card">
<h2 id="category-number">Kategoria I</h2>
<p class="subtitle" id="category-title">Największy Brutal</p>

<div class="progress-container"><div id="progress-bar"></div></div>

<div class="gallery" id="gallery">
    <div class="photo"><img src="gapa.jpg" alt="Gapa"><p>Gapa</p><button onclick="toggleSelect(this)">Wybierz</button></div>
    <div class="photo"><img src="barix.jpg" alt="Barix"><p>Barix</p><button onclick="toggleSelect(this)">Wybierz</button></div>
    <div class="photo"><img src="skora.jpg" alt="Skora"><p>Skora</p><button onclick="toggleSelect(this)">Wybierz</button></div>
    <div class="photo"><img src="switek.jpg" alt="Switek"><p>Switek</p><button onclick="toggleSelect(this)">Wybierz</button></div>
    <div class="photo"><img src="gracha.jpg" alt="Gracha"><p>Gracha</p><button onclick="toggleSelect(this)">Wybierz</button></div>
    <div class="photo"><img src="rychu.jpg" alt="Rychu"><p>Rychu</p><button onclick="toggleSelect(this)">Wybierz</button></div>
</div>

<button id="next-round-btn" onclick="nextRound()">Dalej</button>

<div id="alert-modal">
    <div class="alert-content">
        <p>Proszę wybrać zdjęcie przed przejściem dalej!</p>
        <button onclick="closeAlert()">OK</button>
    </div>
</div>

</div>
</div>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyDJ8lqWAKEs1mPA8dkMKRIm1EwyaidxaJI",
  authDomain: "jezioro-43602.firebaseapp.com",
  projectId: "jezioro-43602",
  storageBucket: "jezioro-43602.firebasestorage.app",
  messagingSenderId: "137604753416",
  appId: "1:137604753416:web:0f81eb2ed7e4df6c3409bd"
};


firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

const maxRounds = 13;
let currentRound = 1;
const categories = [
    {title:"Kategoria I",subtitle:"Największy Brutal"},
    {title:"Kategoria II",subtitle:"Cichy Brutal"},
    {title:"Kategoria III",subtitle:"Największy Simp"},
    {title:"Kategoria IV",subtitle:"Największy Najebus"},
    {title:"Kategoria V",subtitle:"Największy Ćpun"},
    {title:"Kategoria VI",subtitle:"Największy Troll"},
    {title:"Kategoria VII",subtitle:"Największy Tyracz"},
    {title:"Kategoria VIII",subtitle:"Największa Pizda"},
    {title:"Kategoria IX",subtitle:"Największy Rajzownik"},
    {title:"Kategoria X",subtitle:"Największy Wyjebus"},
    {title:"Kategoria XI",subtitle:"Kto Najwięcej Wychodził"},
    {title:"Kategoria XII",subtitle:"Największy Żul"},
    {title:"Kategoria XIII",subtitle:"Największy Żyd"}
];

function toggleSelect(button){
    const photo = button.parentElement;
    if(photo.classList.contains('selected')){
        photo.classList.remove('selected');
        button.innerText="Wybierz";
    }else{
        document.querySelectorAll('.photo').forEach(p=>{p.classList.remove('selected');p.querySelector('button').innerText="Wybierz";});
        photo.classList.add('selected');
        button.innerText="Wybrano";
    }
}

function nextRound(){
    const photos = document.querySelectorAll('.photo');
    const selected = Array.from(photos).find(p=>p.classList.contains('selected'));
    if(!selected){document.getElementById('alert-modal').style.display='flex';return;}

    // Zapis do Firebase (dodaje do tablicy votes)
    db.collection('votes').doc('category'+currentRound)
      .set({votes: firebase.firestore.FieldValue.arrayUnion(selected.querySelector('p').innerText)}, {merge:true});

    if(currentRound>=maxRounds){
        document.querySelector('.card').innerHTML='<h2 style="color:#7fd1ff">Dziękujemy za wybory!!!</h2>';
        return;
    }

    currentRound++;
    document.getElementById('category-number').innerText = categories[currentRound-1].title;
    document.getElementById('category-title').innerText = categories[currentRound-1].subtitle;

    photos.forEach(p=>{p.classList.remove('selected');p.querySelector('button').innerText="Wybierz";});
    const progress = (currentRound-1)/maxRounds*100;
    document.getElementById('progress-bar').style.width = progress+'%';
}

function closeAlert(){document.getElementById('alert-modal').style.display='none';}
</script>
</body>
</html>
